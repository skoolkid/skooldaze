<!DOCTYPE html>
<html>
<head>
<title>Skool Daze: Routine at 32216</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../style.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="Skool Daze" src="../../images/logo-dec.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="32212.html">32212</a>
</td>
<td class="up">Up: <a href="../maps/all.html#32216">Map</a></td>
<td class="next">
Next: <a href="32234.html">32234</a>
</td>
</tr>
</table>
<div class="description">32216: Insert a pixel column into the top or bottom half of the speech bubble text window</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="29442.html">29442</a>. Slides the current contents of the top or bottom half of the speech bubble text window one pixel to the left, and places the new pixel column (4 pixels high) into the slot freed up on the right.
</div>
</div>
<table class="input">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>
<tr>
<td class="register">A</td>
<td class="register-desc">Pixel column byte</td>
</tr>
<tr>
<td class="register">HL</td>
<td class="register-desc">Display file address</td>
</tr>
</table>
</td>
</tr>
<tr>
<td class="address-2"><span id="32216"></span>32216</td>
<td class="instruction">LD B,4</td>
<td class="comment-1" rowspan="1">There are four pixel rows to slide left</td>
</tr>
<tr>
<td class="address-2"><span id="32218"></span>32218</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="1">Save the pixel row counter</td>
</tr>
<tr>
<td class="address-1"><span id="32219"></span>32219</td>
<td class="instruction">LD C,L</td>
<td class="comment-1" rowspan="1">Save <span class="register">L</span> in <span class="register">C</span> briefly</td>
</tr>
<tr>
<td class="address-1"><span id="32220"></span>32220</td>
<td class="instruction">LD B,6</td>
<td class="comment-1" rowspan="1">The text window is six bytes wide</td>
</tr>
<tr>
<td class="address-1"><span id="32222"></span>32222</td>
<td class="instruction">RLCA</td>
<td class="comment-1" rowspan="1">Push a pixel into the carry flag</td>
</tr>
<tr>
<td class="address-2"><span id="32223"></span>32223</td>
<td class="instruction">RL (HL)</td>
<td class="comment-1" rowspan="3">Slide this pixel into a row of the text window</td>
</tr>
<tr>
<td class="address-1"><span id="32225"></span>32225</td>
<td class="instruction">DEC HL</td>
</tr>
<tr>
<td class="address-1"><span id="32226"></span>32226</td>
<td class="instruction">DJNZ 32223</td>
</tr>
<tr>
<td class="address-1"><span id="32228"></span>32228</td>
<td class="instruction">LD L,C</td>
<td class="comment-1" rowspan="1">Restore <span class="register">L</span></td>
</tr>
<tr>
<td class="address-1"><span id="32229"></span>32229</td>
<td class="instruction">POP BC</td>
<td class="comment-1" rowspan="1">Restore the pixel row counter to <span class="register">B</span></td>
</tr>
<tr>
<td class="address-1"><span id="32230"></span>32230</td>
<td class="instruction">INC H</td>
<td class="comment-1" rowspan="1">Move to the next row of pixels</td>
</tr>
<tr>
<td class="address-1"><span id="32231"></span>32231</td>
<td class="instruction">DJNZ 32218</td>
<td class="comment-1" rowspan="1">Jump back until all four rows of pixels have been done</td>
</tr>
<tr>
<td class="address-1"><span id="32233"></span>32233</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1"></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="32212.html">32212</a>
</td>
<td class="up">Up: <a href="../maps/all.html#32216">Map</a></td>
<td class="next">
Next: <a href="32234.html">32234</a>
</td>
</tr>
</table>
<footer>
<div class="release">The complete Skool Daze RAM disassembly 20200809</div>
<div class="copyright">&#169; 1984 Microsphere Computer Services Ltd. &#169; 2020 Richard Dymond.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.2.</div>
<div><a href="../../asm/7DD8.html">Switch to hexadecimal</a>.</div>
</footer>
</body>
</html>