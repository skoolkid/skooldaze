<!DOCTYPE html>
<html>
<head>
<title>Skool Daze: Routine at 30156</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../style.css" />

</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="Skool Daze" src="../../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a href="30132.html">30132</a></span></td>
<td class="up">Up: <a href="../maps/all.html#30156">Map</a></td>
<td class="next"><span class="next-1">Next: <a href="30203.html">30203</a></span></td>
</tr>
</table>
<div class="description">30156: Print a reprimand message</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="30464.html">30464</a>. Generates the graphic data for the text of a reprimand message (e.g. 'NOW FIND A SEAT') in the buffer at <a href="60416.html">60416</a>, and then copies the buffer to the screen.
</div>
</div>
<table class="input-1">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>
<tr>
<td class="register">A</td>
<td class="register-desc">Reprimand message identifier (0-15)</td>
</tr>
<tr>
<td class="register">DE</td>
<td class="register-desc">Attribute file address</td>
</tr>
</table>
<table class="output-0">
<tr class="asm-output-header">
<th colspan="2">Output</th>
</tr>

</table>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="30156"></span>30156</td>
<td class="bytes-0"></td>
<td class="instruction">PUSH DE</td>
<td class="comment-11" rowspan="1">Save the attribute file address</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30157"></span>30157</td>
<td class="bytes-0"></td>
<td class="instruction">RRCA</td>
<td class="comment-11" rowspan="11">Point <span class="register">HL</span> at the appropriate message</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30158"></span>30158</td>
<td class="bytes-0"></td>
<td class="instruction">RRCA</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30159"></span>30159</td>
<td class="bytes-0"></td>
<td class="instruction">LD H,A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30160"></span>30160</td>
<td class="bytes-0"></td>
<td class="instruction">AND 192</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30162"></span>30162</td>
<td class="bytes-0"></td>
<td class="instruction">SCF</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30163"></span>30163</td>
<td class="bytes-0"></td>
<td class="instruction">RRA</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30164"></span>30164</td>
<td class="bytes-0"></td>
<td class="instruction">LD L,A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30165"></span>30165</td>
<td class="bytes-0"></td>
<td class="instruction">LD A,H</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30166"></span>30166</td>
<td class="bytes-0"></td>
<td class="instruction">AND 3</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30168"></span>30168</td>
<td class="bytes-0"></td>
<td class="instruction">ADD A,219</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30170"></span>30170</td>
<td class="bytes-0"></td>
<td class="instruction">LD H,A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="30171"></span>
<div class="comments">
<div class="paragraph">
Now <span class="register">HL</span> points at the appropriate message.
</div>
<div class="paragraph">
<table class="default">
<tr>
<th colspan="1" rowspan="1"><span class="register">A</span></th>
<th colspan="1" rowspan="1"><span class="register">HL</span></th>
<th colspan="1" rowspan="1">Message</th>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">0</td>
<td class="" colspan="1" rowspan="1"><a href="56192.html">56192</a></td>
<td class="" colspan="1" rowspan="1">DON'T SIT ON THE STAIRS</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">1</td>
<td class="" colspan="1" rowspan="1"><a href="56224.html">56224</a></td>
<td class="" colspan="1" rowspan="1">THE ROOM IS PRIVATE</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">2</td>
<td class="" colspan="1" rowspan="1"><a href="56256.html">56256</a></td>
<td class="" colspan="1" rowspan="1">GET TO WHERE YOU SHOULD BE</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">3</td>
<td class="" colspan="1" rowspan="1"><a href="56288.html">56288</a></td>
<td class="" colspan="1" rowspan="1">NOW FIND A SEAT</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">4</td>
<td class="" colspan="1" rowspan="1"><a href="56448.html">56448</a></td>
<td class="" colspan="1" rowspan="1">GET OFF THE FLOOR</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">5</td>
<td class="" colspan="1" rowspan="1"><a href="56480.html">56480</a></td>
<td class="" colspan="1" rowspan="1">COME ALONG WITH ME BOY</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">6</td>
<td class="" colspan="1" rowspan="1"><a href="56512.html">56512</a></td>
<td class="" colspan="1" rowspan="1">HURRY UP YOU HORROR</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">7</td>
<td class="" colspan="1" rowspan="1"><a href="56544.html">56544</a></td>
<td class="" colspan="1" rowspan="1">DON'T TRY MY PATIENCE BOY</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">8</td>
<td class="" colspan="1" rowspan="1"><a href="56704.html">56704</a></td>
<td class="" colspan="1" rowspan="1">NOW DON'T DO IT AGAIN</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">9</td>
<td class="" colspan="1" rowspan="1"><a href="56736.html">56736</a></td>
<td class="" colspan="1" rowspan="1">DON'T TELL TALES</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">10</td>
<td class="" colspan="1" rowspan="1"><a href="56768.html">56768</a></td>
<td class="" colspan="1" rowspan="1">NEVER BE LATE AGAIN</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">11</td>
<td class="" colspan="1" rowspan="1"><a href="56800.html">56800</a></td>
<td class="" colspan="1" rowspan="1">AND STAY THIS TIME</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">12</td>
<td class="" colspan="1" rowspan="1"><a href="56960.html">56960</a></td>
<td class="" colspan="1" rowspan="1">DON'T TOUCH BLACKBOARDS</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">13</td>
<td class="" colspan="1" rowspan="1"><a href="56992.html">56992</a></td>
<td class="" colspan="1" rowspan="1">CATAPULTS ARE FORBIDDEN</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">14</td>
<td class="" colspan="1" rowspan="1"><a href="57024.html">57024</a></td>
<td class="" colspan="1" rowspan="1">DON'T HIT YOUR MATES</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">15</td>
<td class="" colspan="1" rowspan="1"><a href="57056.html">57056</a></td>
<td class="" colspan="1" rowspan="1">YOU ARE NOT A KANGAROO</td>
</tr>
</table>
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30171"></span>30171</td>
<td class="bytes-0"></td>
<td class="instruction">PUSH HL</td>
<td class="comment-11" rowspan="1">Save the message address</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30172"></span>30172</td>
<td class="bytes-0"></td>
<td class="instruction">LD DE,60464</td>
<td class="comment-11" rowspan="1"><a href="60416.html#60464">60464</a>=appropriate lines bubble graphic buffer address for the first line of the message</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30175"></span>30175</td>
<td class="bytes-0"></td>
<td class="instruction">CALL <a href="30042.html">30042</a></td>
<td class="comment-11" rowspan="1">Write the first line of the message</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30178"></span>30178</td>
<td class="bytes-0"></td>
<td class="instruction">CALL <a href="30132.html">30132</a></td>
<td class="comment-11" rowspan="1">Draw the left and right edges of the bubble</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30181"></span>30181</td>
<td class="bytes-0"></td>
<td class="instruction">POP HL</td>
<td class="comment-11" rowspan="1">Restore the message address to <span class="register">HL</span></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30182"></span>30182</td>
<td class="bytes-0"></td>
<td class="instruction">LD A,L</td>
<td class="comment-11" rowspan="3">Point <span class="register">HL</span> at the second half of the message</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30183"></span>30183</td>
<td class="bytes-0"></td>
<td class="instruction">ADD A,16</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30185"></span>30185</td>
<td class="bytes-0"></td>
<td class="instruction">LD L,A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30186"></span>30186</td>
<td class="bytes-0"></td>
<td class="instruction">LD DE,60528</td>
<td class="comment-11" rowspan="1"><a href="60416.html#60528">60528</a>=appropriate lines bubble graphic buffer address for the second line of the message</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30189"></span>30189</td>
<td class="bytes-0"></td>
<td class="instruction">CALL <a href="30042.html">30042</a></td>
<td class="comment-11" rowspan="1">Write the second line of the message</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30192"></span>30192</td>
<td class="bytes-0"></td>
<td class="instruction">CALL <a href="30132.html">30132</a></td>
<td class="comment-11" rowspan="1">Draw the left and right edges of the bubble</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30195"></span>30195</td>
<td class="bytes-0"></td>
<td class="instruction">LD B,0</td>
<td class="comment-11" rowspan="1">Prepare <span class="register">B</span> for the routine at <a href="29977.html#30001">30001</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30197"></span>30197</td>
<td class="bytes-0"></td>
<td class="instruction">LD HL,60440</td>
<td class="comment-11" rowspan="1"><a href="60416.html#60440">60440</a>=first byte of the graphic data in the lines bubble graphic buffer</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30200"></span>30200</td>
<td class="bytes-0"></td>
<td class="instruction">JP <a href="29977.html#30001">30001</a></td>
<td class="comment-11" rowspan="1">Transfer the lines bubble graphic data to the screen (the lines bubble attribute bytes are already on-screen)</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a href="30132.html">30132</a></span></td>
<td class="up">Up: <a href="../maps/all.html#30156">Map</a></td>
<td class="next"><span class="next-1">Next: <a href="30203.html">30203</a></span></td>
</tr>
</table>
<footer>
<div class="release">The complete Skool Daze RAM disassembly 20190614</div>
<div class="copyright">&#169; 1984 Microsphere Computer Services Ltd. &#169; 2019 Richard Dymond.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 7.2.</div>
<div><a href="../../asm/75CC.html">Switch to hexadecimal</a>.</div>
</footer>
</body>
</html>