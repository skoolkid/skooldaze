<!DOCTYPE html>
<html>
<head>
<title>Skool Daze: Routine at 25374</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../style.css" />

</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="Skool Daze" src="../../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a href="25373.html">25373</a></span></td>
<td class="up">Up: <a href="../maps/all.html#25374">Map</a></td>
<td class="next"><span class="next-1">Next: <a href="25402.html">25402</a></span></td>
</tr>
</table>
<div class="description">25374: Check whether a signal has been raised</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routines at <a href="25303.html">25303</a> and <a href="32167.html">32167</a>. On entry, <span class="register">A</span> holds the event identifier, which will be one of:
</div>
<div class="paragraph">
<table class="default">
<tr>
<th colspan="1" rowspan="1">A</th>
<th colspan="1" rowspan="1">Description</th>
<th colspan="1" rowspan="1">Flags</th>
<th colspan="1" rowspan="1">Bit</th>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">0</td>
<td class="" colspan="1" rowspan="1">End of lesson/playtime</td>
<td class="" colspan="1" rowspan="1"><a href="32712.html">32712</a></td>
<td class="centre" colspan="1" rowspan="1">0</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">8</td>
<td class="" colspan="1" rowspan="1">Teacher has arrived at the Map Room</td>
<td class="" colspan="1" rowspan="1"><a href="32713.html">32713</a></td>
<td class="centre" colspan="1" rowspan="1">0</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">9</td>
<td class="" colspan="1" rowspan="1">Teacher has arrived at the Reading Room</td>
<td class="" colspan="1" rowspan="1"><a href="32713.html">32713</a></td>
<td class="centre" colspan="1" rowspan="1">1</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">10</td>
<td class="" colspan="1" rowspan="1">Teacher has arrived at the Exam Room</td>
<td class="" colspan="1" rowspan="1"><a href="32713.html">32713</a></td>
<td class="centre" colspan="1" rowspan="1">2</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">11</td>
<td class="" colspan="1" rowspan="1">Teacher has arrived at the White Room</td>
<td class="" colspan="1" rowspan="1"><a href="32713.html">32713</a></td>
<td class="centre" colspan="1" rowspan="1">3</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">16</td>
<td class="" colspan="1" rowspan="1">Little boy no. 1 is ready to stampede</td>
<td class="" colspan="1" rowspan="1"><a href="32714.html">32714</a></td>
<td class="centre" colspan="1" rowspan="1">0</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">17</td>
<td class="" colspan="1" rowspan="1">Little boy no. 1 is ready to stampede again</td>
<td class="" colspan="1" rowspan="1"><a href="32714.html">32714</a></td>
<td class="centre" colspan="1" rowspan="1">1</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">26</td>
<td class="" colspan="1" rowspan="1">EINSTEIN or BOY WANDER is ready</td>
<td class="" colspan="1" rowspan="1"><a href="32715.html">32715</a></td>
<td class="centre" colspan="1" rowspan="1">2</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">27</td>
<td class="" colspan="1" rowspan="1">MR WACKER is ready</td>
<td class="" colspan="1" rowspan="1"><a href="32715.html">32715</a></td>
<td class="centre" colspan="1" rowspan="1">3</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">28</td>
<td class="" colspan="1" rowspan="1">ERIC has been told about EINSTEIN, BOY WANDER or ANGELFACE</td>
<td class="" colspan="1" rowspan="1"><a href="32715.html">32715</a></td>
<td class="centre" colspan="1" rowspan="1">4</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">29</td>
<td class="" colspan="1" rowspan="1">EINSTEIN has told MR WACKER what ERIC's up to, or ERIC has mumps</td>
<td class="" colspan="1" rowspan="1"><a href="32715.html">32715</a></td>
<td class="centre" colspan="1" rowspan="1">5</td>
</tr>
</table>
</div>
<div class="paragraph">
The routine returns with the zero flag reset if the corresponding signal has been raised.
</div>
</div>
<table class="input-1">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>
<tr>
<td class="register">A</td>
<td class="register-desc">Event ID from a command list</td>
</tr>
</table>
<table class="output-0">
<tr class="asm-output-header">
<th colspan="2">Output</th>
</tr>

</table>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="25374"></span>25374</td>
<td class="bytes-0"></td>
<td class="instruction">PUSH AF</td>
<td class="comment-11" rowspan="1">Save the event identifier briefly</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="25375"></span>25375</td>
<td class="bytes-0"></td>
<td class="instruction">AND 248</td>
<td class="comment-11" rowspan="4">Keep only bits 3-7 (the byte index) and shift them into bits 0-4</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="25377"></span>25377</td>
<td class="bytes-0"></td>
<td class="instruction">RRCA</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="25378"></span>25378</td>
<td class="bytes-0"></td>
<td class="instruction">RRCA</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="25379"></span>25379</td>
<td class="bytes-0"></td>
<td class="instruction">RRCA</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="25380"></span>25380</td>
<td class="bytes-0"></td>
<td class="instruction">ADD A,200</td>
<td class="comment-11" rowspan="2">Modify the LD A,(m) instruction at <a href="25374.html#25396">25396</a> below so that m is <a href="32712.html">32712</a>, <a href="32713.html">32713</a>, <a href="32714.html">32714</a> or <a href="32715.html">32715</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="25382"></span>25382</td>
<td class="bytes-0"></td>
<td class="instruction">LD (25397),A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="25385"></span>25385</td>
<td class="bytes-0"></td>
<td class="instruction">POP AF</td>
<td class="comment-11" rowspan="1">Restore the event identifier to <span class="register">A</span></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="25386"></span>25386</td>
<td class="bytes-0"></td>
<td class="instruction">AND 7</td>
<td class="comment-11" rowspan="1">Keep only bits 0-2 (the bit index)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="25388"></span>25388</td>
<td class="bytes-0"></td>
<td class="instruction">ADD A,A</td>
<td class="comment-11" rowspan="5">Modify the BIT n,A instruction at <a href="25374.html#25399">25399</a> below so that n=<span class="register">A</span> (0-7)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="25389"></span>25389</td>
<td class="bytes-0"></td>
<td class="instruction">ADD A,A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="25390"></span>25390</td>
<td class="bytes-0"></td>
<td class="instruction">ADD A,A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="25391"></span>25391</td>
<td class="bytes-0"></td>
<td class="instruction">ADD A,71</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="25393"></span>25393</td>
<td class="bytes-0"></td>
<td class="instruction">LD (25400),A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="25396"></span>25396</td>
<td class="bytes-0"></td>
<td class="instruction">LD A,(32712)</td>
<td class="comment-11" rowspan="1">Pick up the byte holding the signal flag for this event (the operand of this instruction is modified earlier in this routine)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="25399"></span>25399</td>
<td class="bytes-0"></td>
<td class="instruction">BIT 0,A</td>
<td class="comment-11" rowspan="1">Reset the zero flag if the signal has been raised (this instruction is modified earlier in this routine to check the appropriate bit)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="25401"></span>25401</td>
<td class="bytes-0"></td>
<td class="instruction">RET</td>
<td class="comment-11" rowspan="1"></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a href="25373.html">25373</a></span></td>
<td class="up">Up: <a href="../maps/all.html#25374">Map</a></td>
<td class="next"><span class="next-1">Next: <a href="25402.html">25402</a></span></td>
</tr>
</table>
<footer>
<div class="release">The complete Skool Daze RAM disassembly 20190614</div>
<div class="copyright">&#169; 1984 Microsphere Computer Services Ltd. &#169; 2019 Richard Dymond.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 7.2.</div>
<div><a href="../../asm/631E.html">Switch to hexadecimal</a>.</div>
</footer>
</body>
</html>