<!DOCTYPE html>
<html>
<head>
<title>Skool Daze: Routine at F300</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../style.css" />

</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="Skool Daze" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a href="F2F5.html">F2F5</a></span></td>
<td class="up">Up: <a href="../maps/all.html#f300">Map</a></td>
<td class="next"><span class="next-1">Next: <a href="F3F5.html">F3F5</a></span></td>
</tr>
</table>
<div class="description">F300: Make a teacher conduct a class with ERIC</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="4">
<div class="details">
<div class="paragraph">
Continues from the routine at <a href="7DB2.html">7DB2</a>. Makes a teacher conduct a class with ERIC, from the point of reaching the left edge of the blackboard or map (where the teacher waits for EINSTEIN to show up) until the end of the lesson.
</div>
</div>
<table class="input-1">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>
<tr>
<td class="register">H</td>
<td class="register-desc">Teacher's character number (0xA3-0xA6)</td>
</tr>
</table>
<table class="output-0">
<tr class="asm-output-header">
<th colspan="2">Output</th>
</tr>

</table>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="f300"></span>F300</td>
<td class="instruction">CALL <a href="7CD0.html">$7CD0</a></td>
<td class="comment-11" rowspan="1">Make the teacher wait for EINSTEIN to sit down</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f303"></span>F303</td>
<td class="instruction">JR Z,$F32C</td>
<td class="comment-11" rowspan="1">Jump if ERIC is in the room</td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<span id="f305"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="F400.html">F400</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="f305"></span>F305</td>
<td class="instruction">LD BC,$F103</td>
<td class="comment-11" rowspan="1"><a href="F103.html">F103</a>: 'Please Sir...ERIC is not here'</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f308"></span>F308</td>
<td class="instruction">CALL <a href="7CAF.html">$7CAF</a></td>
<td class="comment-11" rowspan="1">Make EINSTEIN say this</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f30b"></span>F30B</td>
<td class="instruction">CALL <a href="7CE0.html">$7CE0</a></td>
<td class="comment-11" rowspan="1">Make the teacher give lines to EINSTEIN for telling tales (if he's in the mood)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f30e"></span>F30E</td>
<td class="instruction">CALL <a href="7CFC.html">$7CFC</a></td>
<td class="comment-11" rowspan="1">Make the teacher tell the kids to read their books</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f311"></span>F311</td>
<td class="instruction">CALL <a href="79D4.html">$79D4</a></td>
<td class="comment-11" rowspan="1">Set the zero flag if ERIC is in class</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f314"></span>F314</td>
<td class="instruction">LD A,($7FC8)</td>
<td class="comment-11" rowspan="1">Collect the lesson status flags from <a href="7FC8.html">7FC8</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f317"></span>F317</td>
<td class="instruction">JR Z,$F321</td>
<td class="comment-11" rowspan="1">Jump if ERIC is in class</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f319"></span>F319</td>
<td class="instruction">SET 7,A</td>
<td class="comment-11" rowspan="2">Set bit 7 at <a href="7FC8.html">7FC8</a>, indicating that the next lines message for absence (if any) should be no. <a href="DDE0.html">0x0B</a> (AND STAY THIS TIME)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f31b"></span>F31B</td>
<td class="instruction">LD ($7FC8),A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f31e"></span>F31E</td>
<td class="instruction">JP <a href="7C6E.html#7c7b">$7C7B</a></td>
<td class="comment-11" rowspan="1">Make the teacher track down ERIC</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="f321"></span>F321</td>
<td class="instruction">RLCA</td>
<td class="comment-11" rowspan="1">Set the carry flag if the absence lines reprimand should be...</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f322"></span>F322</td>
<td class="instruction">LD B,$0B</td>
<td class="comment-11" rowspan="1">...<a href="DDE0.html">0x0B</a>: AND STAY THIS TIME</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f324"></span>F324</td>
<td class="instruction">JR C,$F327</td>
<td class="comment-11" rowspan="1">Jump if this is the appropriate lines reprimand</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f326"></span>F326</td>
<td class="instruction">DEC B</td>
<td class="comment-11" rowspan="1"><span class="register">B</span>=<a href="DDC0.html">0x0A</a>: NEVER BE LATE AGAIN</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="f327"></span>F327</td>
<td class="instruction">LD A,$AC</td>
<td class="comment-11" rowspan="1">0xAC=ERIC</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f329"></span>F329</td>
<td class="instruction">CALL <a href="7CA0.html#7ca4">$7CA4</a></td>
<td class="comment-11" rowspan="1">Give lines to ERIC</td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<span id="f32c"></span>
<div class="comments">
<div class="paragraph">
ERIC is in class now.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="f32c"></span>F32C</td>
<td class="instruction">LD A,($7FC8)</td>
<td class="comment-11" rowspan="3">Set bit 7 (indicating that the next absence lines message should be 'AND STAY THIS TIME') and bit 6 (indicating that the lesson has started) at <a href="7FC8.html">7FC8</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f32f"></span>F32F</td>
<td class="instruction">OR $C0</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f331"></span>F331</td>
<td class="instruction">LD ($7FC8),A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f334"></span>F334</td>
<td class="instruction">CALL <a href="7CD0.html">$7CD0</a></td>
<td class="comment-11" rowspan="1">Is ERIC in class?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f337"></span>F337</td>
<td class="instruction">JR NZ,$F305</td>
<td class="comment-11" rowspan="1">Jump if not</td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<span id="f339"></span>
<div class="comments">
<div class="paragraph">
This is EINSTEIN's opportunity to tell tales about hitting and blackboard defacement.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f339"></span>F339</td>
<td class="instruction">CALL <a href="61A1.html">$61A1</a></td>
<td class="comment-11" rowspan="1"><span class="register">A</span>=random number</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f33c"></span>F33C</td>
<td class="instruction">CP $E2</td>
<td class="comment-11" rowspan="1">Should EINSTEIN tell the teacher that ERIC hit him?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f33e"></span>F33E</td>
<td class="instruction">JR C,$F35E</td>
<td class="comment-11" rowspan="1">Jump if not (226 times out of 256)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f340"></span>F340</td>
<td class="instruction">LD BC,$F0F9</td>
<td class="comment-11" rowspan="1"><a href="F0F9.html">F0F9</a>: 'Please Sir...ERIC hit me'</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f343"></span>F343</td>
<td class="instruction">CP C</td>
<td class="comment-11" rowspan="1">The result of this comparison is ignored</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f344"></span>F344</td>
<td class="instruction">JR $F349</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f346"></span>F346</td>
<td class="instruction">LD BC,$F12D</td>
<td class="comment-11" rowspan="1">This instruction is never executed; anyway, <a href="F12D.html">F12D</a>='WHAT HAPPENED IN THE YEAR THAT I WAS BORN'</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="f349"></span>F349</td>
<td class="instruction">CALL <a href="7CAF.html">$7CAF</a></td>
<td class="comment-11" rowspan="1">Make EINSTEIN tell the teacher that ERIC hit him</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f34c"></span>F34C</td>
<td class="instruction">CALL <a href="7CE0.html">$7CE0</a></td>
<td class="comment-11" rowspan="1">Make the teacher give lines to EINSTEIN for telling tales (if he's in the mood)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f34f"></span>F34F</td>
<td class="instruction">INC L</td>
<td class="comment-11" rowspan="1">Did the teacher give lines to EINSTEIN?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f350"></span>F350</td>
<td class="instruction">JR NZ,$F359</td>
<td class="comment-11" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f352"></span>F352</td>
<td class="instruction">LD B,$08</td>
<td class="comment-11" rowspan="1">Lines reprimand <a href="DD80.html">0x08</a>: NOW DON'T DO IT AGAIN</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f354"></span>F354</td>
<td class="instruction">LD A,$AC</td>
<td class="comment-11" rowspan="1">0xAC=ERIC</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f356"></span>F356</td>
<td class="instruction">CALL <a href="7CA0.html#7ca4">$7CA4</a></td>
<td class="comment-11" rowspan="1">Give ERIC lines</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="f359"></span>F359</td>
<td class="instruction">CALL <a href="7CD0.html">$7CD0</a></td>
<td class="comment-11" rowspan="1">Is ERIC in class?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f35c"></span>F35C</td>
<td class="instruction">JR NZ,$F305</td>
<td class="comment-11" rowspan="1">Jump if not</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="f35e"></span>F35E</td>
<td class="instruction">CALL <a href="7128.html">$7128</a></td>
<td class="comment-11" rowspan="1"><span class="register">A</span>=identifier of the blackboard closest to the teacher</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f361"></span>F361</td>
<td class="instruction">LD C,A</td>
<td class="comment-11" rowspan="1">Transfer this to <span class="register">C</span></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f362"></span>F362</td>
<td class="instruction">CP $EC</td>
<td class="comment-11" rowspan="1">Are we on the top floor?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f364"></span>F364</td>
<td class="instruction">JR NZ,$F36C</td>
<td class="comment-11" rowspan="1">Jump if not</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f366"></span>F366</td>
<td class="instruction">INC L</td>
<td class="comment-11" rowspan="1"><span class="register">L</span>=0x62</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f367"></span>F367</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-11" rowspan="1"><span class="register">A</span>=teacher's x-coordinate</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f368"></span>F368</td>
<td class="instruction">CP $3A</td>
<td class="comment-11" rowspan="1">Are we in the Map Room?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f36a"></span>F36A</td>
<td class="instruction">JR NC,$F3D3</td>
<td class="comment-11" rowspan="1">Jump if so (no blackboard in there)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="f36c"></span>F36C</td>
<td class="instruction">INC C</td>
<td class="comment-11" rowspan="2"><span class="register">BC</span>=<a href="7FED.html">7FED</a> (Reading Room blackboard), <a href="7FEF.html">7FEF</a> (White Room blackboard) or <a href="7FF1.html">7FF1</a> (Exam Room blackboard)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f36d"></span>F36D</td>
<td class="instruction">LD B,$7F</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f36f"></span>F36F</td>
<td class="instruction">LD A,(BC)</td>
<td class="comment-11" rowspan="1"><span class="register">A</span>=number of the character who last wrote on the board</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f370"></span>F370</td>
<td class="instruction">AND A</td>
<td class="comment-11" rowspan="1">Is the board clean?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f371"></span>F371</td>
<td class="instruction">JR Z,$F3A1</td>
<td class="comment-11" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f373"></span>F373</td>
<td class="instruction">CP $A7</td>
<td class="comment-11" rowspan="1">Did a teacher write on the board?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f375"></span>F375</td>
<td class="instruction">JR C,$F3A1</td>
<td class="comment-11" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f377"></span>F377</td>
<td class="instruction">JR NZ,$F382</td>
<td class="comment-11" rowspan="1">Jump unless BOY WANDER wrote on the board</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f379"></span>F379</td>
<td class="instruction">CALL <a href="61A1.html">$61A1</a></td>
<td class="comment-11" rowspan="1"><span class="register">A</span>=random number</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f37c"></span>F37C</td>
<td class="instruction">CP $C8</td>
<td class="comment-11" rowspan="1">Set the carry flag 200 times out of 256</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f37e"></span>F37E</td>
<td class="instruction">LD A,$11</td>
<td class="comment-11" rowspan="1"><a href="D98E.html">0x11</a>='BOY WANDER'</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f380"></span>F380</td>
<td class="instruction">JR C,$F384</td>
<td class="comment-11" rowspan="1">Jump if EINSTEIN is going to blame BOY WANDER</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="f382"></span>F382</td>
<td class="instruction">LD A,$10</td>
<td class="comment-11" rowspan="1"><a href="D980.html">0x10</a>='ERIC'</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="f384"></span>F384</td>
<td class="instruction">LD BC,$F113</td>
<td class="comment-11" rowspan="2">Insert ERIC's or BOY WANDER's name into the 'X wrote on the blackboard' message at <a href="F112.html">F112</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f387"></span>F387</td>
<td class="instruction">LD (BC),A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f388"></span>F388</td>
<td class="instruction">DEC C</td>
<td class="comment-11" rowspan="1">Point <span class="register">BC</span> at the start of the message</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f389"></span>F389</td>
<td class="instruction">CALL <a href="7CAF.html">$7CAF</a></td>
<td class="comment-11" rowspan="1">Make EINSTEIN tell a tale about ERIC or BOY WANDER writing on the blackboard</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f38c"></span>F38C</td>
<td class="instruction">CALL <a href="7CE0.html">$7CE0</a></td>
<td class="comment-11" rowspan="1">Make the teacher give lines to EINSTEIN for telling tales (if he's in the mood)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f38f"></span>F38F</td>
<td class="instruction">INC L</td>
<td class="comment-11" rowspan="1">Did the teacher give lines to EINSTEIN?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f390"></span>F390</td>
<td class="instruction">JR NZ,$F3A1</td>
<td class="comment-11" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f392"></span>F392</td>
<td class="instruction">LD A,($F113)</td>
<td class="comment-11" rowspan="1"><span class="register">A</span>=<a href="D980.html">0x10</a> ('ERIC') or <a href="D98E.html">0x11</a> ('BOY WANDER')</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f395"></span>F395</td>
<td class="instruction">RRCA</td>
<td class="comment-11" rowspan="1">Set the carry flag if EINSTEIN blamed BOY WANDER</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f396"></span>F396</td>
<td class="instruction">LD A,$A7</td>
<td class="comment-11" rowspan="1">0xA7=BOY WANDER</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f398"></span>F398</td>
<td class="instruction">JR C,$F39C</td>
<td class="comment-11" rowspan="1">Jump if EINSTEIN blamed BOY WANDER for writing on the board</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f39a"></span>F39A</td>
<td class="instruction">LD A,$AC</td>
<td class="comment-11" rowspan="1">0xAC=ERIC</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="f39c"></span>F39C</td>
<td class="instruction">LD B,$0C</td>
<td class="comment-11" rowspan="1">Lines reprimand <a href="DE80.html">0x0C</a>: DON'T TOUCH BLACKBOARDS</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f39e"></span>F39E</td>
<td class="instruction">CALL <a href="7CA0.html#7ca4">$7CA4</a></td>
<td class="comment-11" rowspan="1">Make the teacher give lines to ERIC or BOY WANDER</td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<span id="f3a1"></span>
<div class="comments">
<div class="paragraph">
With EINSTEIN's tales now safely told, it's time to wipe the blackboard.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="f3a1"></span>F3A1</td>
<td class="instruction">LD BC,$71DC</td>
<td class="comment-11" rowspan="2">Hand over control to the routine at <a href="71DC.html">71DC</a>, making the teacher wipe the blackboard</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f3a4"></span>F3A4</td>
<td class="instruction">CALL <a href="7CF1.html">$7CF1</a></td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<span id="f3a7"></span>
<div class="comments">
<div class="paragraph">
Control returns here after the teacher has wiped the blackboard.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f3a7"></span>F3A7</td>
<td class="instruction">LD L,$62</td>
<td class="comment-11" rowspan="2"><span class="register">A</span>=teacher's x-coordinate (equal to that of the left edge of the blackboard)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f3a9"></span>F3A9</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f3aa"></span>F3AA</td>
<td class="instruction">ADD A,$03</td>
<td class="comment-11" rowspan="5">Place the x-coordinate of the middle of the blackboard into byte 0x6B of the teacher's buffer, and the same value into byte 0x6C (which ensures that the routine at <a href="633C.html">633C</a> will not relinquish control before the teacher has reached the middle of the blackboard)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f3ac"></span>F3AC</td>
<td class="instruction">LD L,$6B</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f3ae"></span>F3AE</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f3af"></span>F3AF</td>
<td class="instruction">INC L</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f3b0"></span>F3B0</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f3b1"></span>F3B1</td>
<td class="instruction">LD BC,$633C</td>
<td class="comment-11" rowspan="2">Hand over control to the routine at <a href="633C.html">633C</a>, making the teacher walk to the middle of the blackboard</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f3b4"></span>F3B4</td>
<td class="instruction">CALL <a href="7CF1.html">$7CF1</a></td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<span id="f3b7"></span>
<div class="comments">
<div class="paragraph">
Control returns here when the teacher has walked to the middle of the blackboard.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f3b7"></span>F3B7</td>
<td class="instruction">CALL <a href="61A1.html">$61A1</a></td>
<td class="comment-11" rowspan="1"><span class="register">A</span>=random number</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f3ba"></span>F3BA</td>
<td class="instruction">CP $B4</td>
<td class="comment-11" rowspan="1">Should the teacher write on the blackboard?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f3bc"></span>F3BC</td>
<td class="instruction">JR C,$F3D3</td>
<td class="comment-11" rowspan="1">Jump if not (180 times out of 256)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f3be"></span>F3BE</td>
<td class="instruction">LD BC,$7264</td>
<td class="comment-11" rowspan="2">Hand over control to the routine at <a href="7264.html">7264</a>, making the teacher write on the blackboard</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f3c1"></span>F3C1</td>
<td class="instruction">CALL <a href="7CF1.html">$7CF1</a></td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<span id="f3c4"></span>
<div class="comments">
<div class="paragraph">
Control returns here when the teacher has finished writing on the blackboard.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f3c4"></span>F3C4</td>
<td class="instruction">CALL <a href="61A1.html">$61A1</a></td>
<td class="comment-11" rowspan="1"><span class="register">A</span>=random number</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f3c7"></span>F3C7</td>
<td class="instruction">CP $A0</td>
<td class="comment-11" rowspan="1">Should the teacher tell the kids to write an essay?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f3c9"></span>F3C9</td>
<td class="instruction">JR C,$F3D3</td>
<td class="comment-11" rowspan="1">Jump if not (10 times out of 16)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f3cb"></span>F3CB</td>
<td class="instruction">LD BC,$F2D6</td>
<td class="comment-11" rowspan="1"><a href="F2D6.html">F2D6</a>: 'WRITE AN ESSAY WITH THIS TITLE'</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f3ce"></span>F3CE</td>
<td class="instruction">CALL <a href="7CFC.html#7d26">$7D26</a></td>
<td class="comment-11" rowspan="1">Make the teacher tell the kids to write an essay</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f3d1"></span>F3D1</td>
<td class="instruction">JR $F3DD</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="f3d3"></span>F3D3</td>
<td class="instruction">CALL <a href="61A1.html">$61A1</a></td>
<td class="comment-11" rowspan="1"><span class="register">A</span>=random number</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f3d6"></span>F3D6</td>
<td class="instruction">CP $F0</td>
<td class="comment-11" rowspan="1">Is this going to be a questions-and-answers lesson?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f3d8"></span>F3D8</td>
<td class="instruction">JR C,<a href="F400.html">$F400</a></td>
<td class="comment-11" rowspan="1">Jump if so (15 times out of 16)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f3da"></span>F3DA</td>
<td class="instruction">CALL <a href="7CFC.html">$7CFC</a></td>
<td class="comment-11" rowspan="1">Make the teacher tell the kids to go to a page in their books</td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<span id="f3dd"></span>
<div class="comments">
<div class="paragraph">
Now we enter a loop that makes the teacher walk up and down next to the blackboard (or the map), checking periodically whether ERIC has gone AWOL.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="f3dd"></span>F3DD</td>
<td class="instruction">CALL <a href="7CD0.html">$7CD0</a></td>
<td class="comment-11" rowspan="1">Is ERIC in class?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f3e0"></span>F3E0</td>
<td class="instruction">JP NZ,$F305</td>
<td class="comment-11" rowspan="1">Jump if not</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f3e3"></span>F3E3</td>
<td class="instruction">LD L,$62</td>
<td class="comment-11" rowspan="2">Collect the teacher's x-coordinate from byte 0x62 of his buffer</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f3e5"></span>F3E5</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f3e6"></span>F3E6</td>
<td class="instruction">XOR $03</td>
<td class="comment-11" rowspan="1">Now <span class="register">A</span> holds the x-coordinate of the location 1 or 3 spaces behind the teacher</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f3e8"></span>F3E8</td>
<td class="instruction">LD L,$6B</td>
<td class="comment-11" rowspan="4">Place this into byte 0x6B of his buffer, and the same value into byte 0x6C (which ensures that the routine at <a href="633C.html">633C</a> will not relinquish control before the teacher has reached that destination)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f3ea"></span>F3EA</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f3eb"></span>F3EB</td>
<td class="instruction">INC L</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f3ec"></span>F3EC</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f3ed"></span>F3ED</td>
<td class="instruction">LD BC,$633C</td>
<td class="comment-11" rowspan="2">Hand over control to the routine at <a href="633C.html">633C</a>, making the teacher turn round and walk 1 or 3 paces</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f3f0"></span>F3F0</td>
<td class="instruction">CALL <a href="7CF1.html">$7CF1</a></td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="f3f3"></span>F3F3</td>
<td class="instruction">JR $F3DD</td>
<td class="comment-11" rowspan="1">Make the teacher turn round and walk 1 or 3 paces again</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a href="F2F5.html">F2F5</a></span></td>
<td class="up">Up: <a href="../maps/all.html#f300">Map</a></td>
<td class="next"><span class="next-1">Next: <a href="F3F5.html">F3F5</a></span></td>
</tr>
</table>
<footer>
<div class="release">The complete Skool Daze RAM disassembly 20181018</div>
<div class="copyright">&#169; 1984 Microsphere Computer Services Ltd. &#169; 2018 Richard Dymond.</div>
<div class="created">Created using <a href="http://skoolkit.ca/">SkoolKit</a> 7.0.</div>
<div><a href="http://skoolkit.ca/disassemblies/skool_daze/asm/62208.html">Switch to decimal</a>.</div>
</footer>
</body>
</html>