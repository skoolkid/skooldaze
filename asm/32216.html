<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Skool Daze: Routine at 32216</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../microsphere.css" />
<link rel="stylesheet" type="text/css" href="../skool.css" />
<link rel="stylesheet" type="text/css" href="../sd.css" />

</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a class="link" href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a class="link" href="32212.html">32212</a></span></td>
<td class="up">Up: <a class="link" href="../maps/all.html#32216">Map</a></td>
<td class="next"><span class="next-1">Next: <a class="link" href="32234.html">32234</a></span></td>
</tr>
</table>
<div class="description">32216: Insert a pixel column into the top or bottom half of the speech bubble text window</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="4">
<div class="details">
<div class="paragraph">
Used by the routine at <a class="link" href="29442.html">29442</a>. Slides the current contents of the top or bottom half of the speech bubble text window one pixel to the left, and places the new pixel column (4 pixels high) into the slot freed up on the right.
</div>
</div>
<table class="input-1">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>
<tr>
<td class="register">A</td>
<td class="register-desc">Pixel column byte</td>
</tr>
<tr>
<td class="register">HL</td>
<td class="register-desc">Display file address</td>
</tr>
</table>
<table class="output-0">
<tr class="asm-output-header">
<th colspan="2">Output</th>
</tr>

</table>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="32216"></a>32216</td>
<td class="instruction">LD B,4</td>
<td class="comment-11" rowspan="1">There are four pixel rows to slide left</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="32218"></a>32218</td>
<td class="instruction">PUSH BC</td>
<td class="comment-11" rowspan="1">Save the pixel row counter</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="32219"></a>32219</td>
<td class="instruction">LD C,L</td>
<td class="comment-11" rowspan="1">Save <span class="register">L</span> in <span class="register">C</span> briefly</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="32220"></a>32220</td>
<td class="instruction">LD B,6</td>
<td class="comment-11" rowspan="1">The text window is six bytes wide</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="32222"></a>32222</td>
<td class="instruction">RLCA</td>
<td class="comment-11" rowspan="1">Push a pixel into the carry flag</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="32223"></a>32223</td>
<td class="instruction">RL (HL)</td>
<td class="comment-11" rowspan="3">Slide this pixel into a row of the text window</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="32225"></a>32225</td>
<td class="instruction">DEC HL</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="32226"></a>32226</td>
<td class="instruction">DJNZ 32223</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="32228"></a>32228</td>
<td class="instruction">LD L,C</td>
<td class="comment-11" rowspan="1">Restore <span class="register">L</span></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="32229"></a>32229</td>
<td class="instruction">POP BC</td>
<td class="comment-11" rowspan="1">Restore the pixel row counter to <span class="register">B</span></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="32230"></a>32230</td>
<td class="instruction">INC H</td>
<td class="comment-11" rowspan="1">Move to the next row of pixels</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="32231"></a>32231</td>
<td class="instruction">DJNZ 32218</td>
<td class="comment-11" rowspan="1">Jump back until all four rows of pixels have been done</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="32233"></a>32233</td>
<td class="instruction">RET</td>
<td class="comment-11" rowspan="1"></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a class="link" href="32212.html">32212</a></span></td>
<td class="up">Up: <a class="link" href="../maps/all.html#32216">Map</a></td>
<td class="next"><span class="next-1">Next: <a class="link" href="32234.html">32234</a></span></td>
</tr>
</table>
<div class="footer">
<div class="release">The complete Skool Daze RAM disassembly 20140614</div>
<div class="copyright">&#169; 1984 Microsphere Computer Services Ltd (Skool Daze). &#169; 2014 Richard Dymond (this disassembly).</div>
<div class="created">Created using <a class="link" href="http://pyskool.ca/?page_id=177">SkoolKit</a> 4.0.</div>
</div>
</body>
</html>