<!DOCTYPE html>
<html>
<head>
<title>Skool Daze: Routine at 6A82</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../style.css" />

</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="Skool Daze" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a href="6A7E.html">6A7E</a></span></td>
<td class="up">Up: <a href="../maps/all.html#6a82">Map</a></td>
<td class="next"><span class="next-1">Next: <a href="6AA1.html">6AA1</a></span></td>
</tr>
</table>
<div class="description">6A82: Make a little boy find and follow little boy no. 1</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by command list <a href="FDCF.html">0xCE</a> (which is used by little boys 2-11).
</div>
</div>
<table class="input-1">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>
<tr>
<td class="register">H</td>
<td class="register-desc">Little boy's character number (0x99-0xA2)</td>
</tr>
<tr>
<td class="register">L</td>
<td class="register-desc">0x7A</td>
</tr>
</table>
<table class="output-0">
<tr class="asm-output-header">
<th colspan="2">Output</th>
</tr>

</table>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="6a82"></span>6A82</td>
<td class="bytes-0"></td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-11" rowspan="4">Reset bit 6 (do not walk slowly continuously) and bit 7 (walk fast) and set bit 5 (walk fast continuously) of byte 0x7A of the boy's buffer</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="6a83"></span>6A83</td>
<td class="bytes-0"></td>
<td class="instruction">AND $1F</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="6a85"></span>6A85</td>
<td class="bytes-0"></td>
<td class="instruction">ADD A,$20</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="6a87"></span>6A87</td>
<td class="bytes-0"></td>
<td class="instruction">LD (HL),A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="6a88"></span>6A88</td>
<td class="bytes-0"></td>
<td class="instruction">LD DE,$987D</td>
<td class="comment-11" rowspan="2">Collect byte 0x7D of little boy no. 1's buffer, which holds the MSB of a continual subcommand routine address</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="6a8b"></span>6A8B</td>
<td class="bytes-0"></td>
<td class="instruction">LD A,(DE)</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="6a8c"></span>6A8C</td>
<td class="bytes-0"></td>
<td class="instruction">CP $69</td>
<td class="comment-11" rowspan="2">Return unless little boy no. 1's continual subcommand is the routine at <a href="69F6.html">69F6</a>, i.e. he's tripping people up as he proceeds to his destination</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="6a8e"></span>6A8E</td>
<td class="bytes-0"></td>
<td class="instruction">RET NZ</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="6a8f"></span>6A8F</td>
<td class="bytes-0"></td>
<td class="instruction">LD L,E</td>
<td class="comment-11" rowspan="4">Place the address of the continual subcommand routine at <a href="69F6.html">69F6</a> into bytes 0x7C and 0x7D of this boy's character buffer (making him trip people up as he follows little boy no. 1)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="6a90"></span>6A90</td>
<td class="bytes-0"></td>
<td class="instruction">LD (HL),A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="6a91"></span>6A91</td>
<td class="bytes-0"></td>
<td class="instruction">DEC L</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="6a92"></span>6A92</td>
<td class="bytes-0"></td>
<td class="instruction">LD (HL),$F6</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="6a94"></span>6A94</td>
<td class="bytes-0"></td>
<td class="instruction">LD E,$63</td>
<td class="comment-11" rowspan="5">Copy bytes 0x63-0x66 of little boy no. 1's character buffer into bytes 0x63-0x66 of this little boy's character buffer; bytes 0x63 and 0x64 will then contain <a href="63BE.html#63d1">63D1</a>, and bytes 0x65 and 0x66 will contain little boy no. 1's destination</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="6a96"></span>6A96</td>
<td class="bytes-0"></td>
<td class="instruction">LD L,E</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="6a97"></span>6A97</td>
<td class="bytes-0"></td>
<td class="instruction">LD BC,$0004</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="6a9a"></span>6A9A</td>
<td class="bytes-0"></td>
<td class="instruction">EX DE,HL</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="6a9b"></span>6A9B</td>
<td class="bytes-0"></td>
<td class="instruction">LDIR</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="6a9d"></span>6A9D</td>
<td class="bytes-0"></td>
<td class="instruction">EX DE,HL</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="6a9e"></span>6A9E</td>
<td class="bytes-0"></td>
<td class="instruction">JP <a href="63BE.html#63cd">$63CD</a></td>
<td class="comment-11" rowspan="1">Make this little boy follow little boy no. 1</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a href="6A7E.html">6A7E</a></span></td>
<td class="up">Up: <a href="../maps/all.html#6a82">Map</a></td>
<td class="next"><span class="next-1">Next: <a href="6AA1.html">6AA1</a></span></td>
</tr>
</table>
<footer>
<div class="release">The complete Skool Daze RAM disassembly 20190614</div>
<div class="copyright">&#169; 1984 Microsphere Computer Services Ltd. &#169; 2019 Richard Dymond.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 7.2.</div>
<div><a href="../dec/asm/27266.html">Switch to decimal</a>.</div>
</footer>
</body>
</html>