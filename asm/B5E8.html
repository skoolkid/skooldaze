<!DOCTYPE html>
<html>
<head>
<title>Skool Daze: Routine at B5E8</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../style.css" />

</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="Skool Daze" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a href="B57F.html">B57F</a></span></td>
<td class="up">Up: <a href="../maps/all.html#b5e8">Map</a></td>
<td class="next"><span class="next-1">Next: <a href="B5FE.html">B5FE</a></span></td>
</tr>
</table>
<div class="description">B5E8: Guide a character onto the catwalk or off it</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="4">
<div class="details">
<div class="paragraph">
Used by the routines at <a href="B3E8.html">B3E8</a> and <a href="EFE0.html">EFE0</a>. Makes a character walk in from the left to the middle of the screen (at which point his name may be changed), or from the middle of the screen and off to the right.
</div>
</div>
<table class="input-0">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>

</table>
<table class="output-0">
<tr class="asm-output-header">
<th colspan="2">Output</th>
</tr>

</table>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="b5e8"></span>B5E8</td>
<td class="instruction">LD B,$26</td>
<td class="comment-11" rowspan="1">The character will take 38 steps along the catwalk</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="b5ea"></span>B5EA</td>
<td class="instruction">PUSH BC</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="b5eb"></span>B5EB</td>
<td class="instruction">LD H,$98</td>
<td class="comment-11" rowspan="1">This instruction is set by the routine at <a href="B175.html">B175</a> to either 'LD H,152' (boy) or 'LD H,164' (teacher) as appropriate</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="b5ed"></span>B5ED</td>
<td class="instruction">CALL <a href="B4E8.html">$B4E8</a></td>
<td class="comment-11" rowspan="1">Move the character one step along the catwalk</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="b5f0"></span>B5F0</td>
<td class="instruction">CALL <a href="FE40.html">$FE40</a></td>
<td class="comment-11" rowspan="1">Make a walking sound effect</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="b5f3"></span>B5F3</td>
<td class="instruction">LD C,$64</td>
<td class="comment-11" rowspan="4">Pause briefly between steps</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="b5f5"></span>B5F5</td>
<td class="instruction">DJNZ $B5F5</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="b5f7"></span>B5F7</td>
<td class="instruction">DEC C</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="b5f8"></span>B5F8</td>
<td class="instruction">JR NZ,$B5F5</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="b5fa"></span>B5FA</td>
<td class="instruction">POP BC</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="b5fb"></span>B5FB</td>
<td class="instruction">DJNZ $B5EA</td>
<td class="comment-11" rowspan="1">Jump back until 38 steps have been taken</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="b5fd"></span>B5FD</td>
<td class="instruction">RET</td>
<td class="comment-11" rowspan="1"></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a href="B57F.html">B57F</a></span></td>
<td class="up">Up: <a href="../maps/all.html#b5e8">Map</a></td>
<td class="next"><span class="next-1">Next: <a href="B5FE.html">B5FE</a></span></td>
</tr>
</table>
<footer>
<div class="release">The complete Skool Daze RAM disassembly 20151011</div>
<div class="copyright">&#169; 1984 Microsphere Computer Services Ltd (Skool Daze). &#169; 2015 Richard Dymond (this disassembly).</div>
<div class="created">Created using <a href="http://skoolkit.ca/">SkoolKit</a> 5.1.</div>
</footer>
</body>
</html>